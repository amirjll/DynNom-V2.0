{
    "collab_server" : "",
    "contents" : "library(shiny)\nlibrary(survival)\nlibrary(stargazer)\nrequire(compare)\nrequire(ggplot2)\nrequire(DynNom)\n########################################\n####### lm\n########################################\nmodel1 <- lm(uptake ~ Plant + conc + Plant * conc, data = CO2)\nDynNom(model1, CO2)\nDynNom(model1, CO2, clevel=0.9, covariate = \"numeric\")\n\nmodel1 <- lm(uptake ~ Plant, data = CO2)\nDynNom(model1, CO2)\n\nmodel1 <- glm(uptake ~ conc, data = CO2)\nDynNom(model1, CO2)\nDynNom(model1, CO2, clevel=0.9, covariate = \"numeric\")\n\nmodel1 <- lm(uptake ~ Plant + log(conc) + Plant * conc, data = CO2)\nDynNom(model1, CO2)\n\n########################################\n####### glm\n########################################\nclotting <- data.frame(\n  u = c(5,10,15,20,30,40,60,80,100),\n  lot1 = c(118,58,42,35,27,25,21,19,18),\n  lot2 = c(69,35,26,21,18,16,13,12,12))\nmodel1 <- glm(lot1 ~ u, data = clotting)\nDynNom(model1, clotting)\n\nmodel1 <- glm(Fertility ~ Agriculture + Education + Catholic, data = swiss)\nDynNom(model1, swiss, clevel = 0.9)\n\ndata1 =as.data.frame(Titanic)\nmodel2 <- glm(Survived ~ Age + Class + Sex, data = data1, weights = Freq,\n              family = binomial(\"probit\"))\nDynNom(model2, as.data.frame(Titanic), clevel = 0.9)\n\nmodel3 <- glm(event ~ mag + dist + accel, data = attenu, family = poisson)\nDynNom(model3, attenu, covariate = \"numeric\")\n\n### binomial\nswiss$ftl <- as.numeric(swiss$Fertility > 70)\nmodel1 <- glm(ftl ~ Agriculture + Education + Catholic, data = swiss, family = binomial)\nDynNom(model1, swiss, clevel=0.9, covariate = \"numeric\")\n\nmodel1 <- glm(ftl ~ Agriculture , data = swiss, family = binomial)\nDynNom(model1, swiss)\n\n### gaussian\ndata(anorexia, package=\"MASS\")\nanorex.1 <- glm(Postwt ~ Prewt + Treat,\n                family = gaussian, data = anorexia)\nDynNom(anorex.1, anorexia,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### poisson\nmodel1 <- glm(event ~ mag + station + log(dist) + accel, data = attenu, family = poisson)\nDynNom(model1, attenu, clevel=0.9)\n\n\n########################################\n####### Coxph\n########################################\nlibrary(simPH)\n### only one factor\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ demsnmaj, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### only one numeric\nmodel1 <- coxph(Surv(acttime, censor) ~ deathrt1, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### only one numeric and one factor\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ demsnmaj + deathrt1, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### only one strata      ##### Has problem I think!\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart), data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### One strata + one factor\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+demsnmaj, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n\n### One strata + one numeric\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+deathrt1, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,ptype = \"1-st\")\n\n### One strata + one numeric + one factor\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+deathrt1+demsnmaj, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### two strata only  ##### Has problem I think!\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+strata(demsnmaj), data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n\n### two strata + one factor    ##### Has problem I think!\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+ strata(demhsmaj)+ demsnmaj, data = CarpenterFdaData)\ns.fit=survfit(model1)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### two strata + one numeric    ##### Has problem I think!\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+ strata(demhsmaj)+deathrt1 , data = CarpenterFdaData)\ns.fit=survfit(model1)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### two strata + one numeric + one factor    ##### Has problem I think!\nCarpenterFdaData$demsnmaj <- as.factor(CarpenterFdaData$demsnmaj)\nmodel1 <- coxph(Surv(acttime, censor) ~ strata(prespart)+ strata(demhsmaj)+deathrt1 + demsnmaj, data = CarpenterFdaData)\nDynNom(model1, CarpenterFdaData)\nDynNom(model1, CarpenterFdaData,clevel=0.9,covariate = \"numeric\",ptype = \"1-st\")\n\n### coxph weights\ntest1 <- list(time=c(4,3,1,1,2,2,3),\n              status=c(1,1,1,0,1,1,0),\n              x=c(0,2,1,1,1,0,0),\n              sex=c(0,0,0,0,1,1,1),\n              wt=c(1,2,2,3,2,1,2))\nt1 <- coxph( Surv(time, status) ~ x + strata(sex), data=test1, weights=wt)\n\nDynNom(t1, test1)\n# is.null(model$weights) == FALSE\n# names(model$model[ncol(model$model)]) == \"(weights)\"\n# tail(names(attr(model2$terms,\"dataClasses\")),n=1)==\"(weights)\"\n\n",
    "created" : 1445971568834.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3872950667",
    "id" : "4D338AEF",
    "lastKnownWriteTime" : 1446032314,
    "last_content_update" : 0,
    "path" : "C:/Users/Amir/Dropbox/Projects/DynNom project/add coxph/final.check.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}